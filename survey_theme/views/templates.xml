<odoo>
  <data>
    <template id="header_survey" name="Header">
      <header>
        <nav class="navbar navbar-expand navbar-light bg-light">
          <div class="container">
            <a href="/" class="navbar-brand logo">
              <img t-att-src="'/logo.png?company=%s' % res_company.id" t-att-alt="'Logo of %s' % res_company.name" t-att-title="res_company.name"/>
            </a>
            <ul id="top_menu" class="nav navbar-nav ml-auto">
              <t t-call="portal.placeholder_user_sign_in">
                <t t-set="_item_class" t-value="'nav-item'"/>
                <t t-set="_link_class" t-value="'nav-link'"/>
              </t>
              <t t-call="portal.user_dropdown">
                <t t-set="_user_name" t-value="true"/>
                <t t-set="_item_class" t-value="'nav-item dropdown'"/>
                <t t-set="_link_class" t-value="'nav-link'"/>
                <t t-set="_dropdown_menu_class" t-value="'dropdown-menu-right'"/>
              </t>
            </ul>
          </div>
        </nav>
      </header>
    </template>
    <template id="o_survey_wrap" inherit_id="survey.survey_page_fill">
      <xpath expr="//div[hasclass('o_survey_wrap')]" position="before">
        <t t-call="survey_theme.header_survey"/>
      </xpath>
    </template>
    <template id="test_layout" inherit_id="survey.layout" name="Survey Layout">
      <xpath expr="//div[hasclass('text-right')]" position="replace">
        <div class="container-fluid">
          <div class="row">
            <div class="col-6 offset-3 d-flex justify-content-center">
              <div class="o_survey_brand_message rounded mr-3 border">
                <div class="px-2 py-2 d-inline-block" t-call="web.brand_promotion_message">
                  <t t-set="_message"></t>
                  <t t-set="_utm_medium" t-valuef="survey"/>
                </div>
                <div class="o_survey_navigation_wrapper d-inline-block" t-call="survey.survey_navigation">
                </div>
              </div>
            </div>
            <div class="col-3 text-right">
              <div class="o_survey_progress_wrapper d-inline-block pr-5 text-left">
                <t t-call="survey.survey_progression" t-if="survey and survey.questions_layout != 'one_page' and answer and answer.state == 'in_progress' and (not question or not question.is_page)">
                  <t t-if="survey.questions_layout == 'page_per_section'">
                    <t t-set="page_ids" t-value="survey.page_ids.ids"/>
                    <t t-set="page_number" t-value="page_ids.index(page.id) + (1 if survey.progression_mode == 'number' else 0)"/>
                  </t>
                  <t t-else="">
                    <t t-set="page_ids" t-value="survey.question_ids.ids"/>
                    <t t-set="page_number" t-value="page_ids.index(question.id)"/>
                  </t>
                </t>
              </div>
            </div>
          </div>
        </div>

      </xpath>
    </template>

    <template id="survey_fill_form_inherit" inherit_id="survey.survey_fill_form">
      <xpath expr="//form" position="attributes">
        <attribute name="class">d-flex flex-grow-1 align-items-start</attribute>
      </xpath>
    </template>
    <template id="survey_fill_form_start_inherit" inherit_id="survey.survey_fill_form_start">
      <xpath expr="//div[hasclass('o_survey_start')]" position="replace">
        <div class="wrap container-fluid o_survey_start">
          <div class='row mb32'>
            <div class="oe_no_empty col-6 offset-6 mb-5">
              <div class="text-right" t-field="survey.description"/>
            </div>
            <t t-if="answer.is_session_answer">
              <div class="font-weight-bold">
                        The session will begin automatically when the host starts.
              </div>
            </t>
            <t t-else="">
              <div t-if="survey.is_time_limited">
                <p>
                  <span>Time limit for this survey: </span>
                  <span class="font-weight-bold text-danger" t-field="survey.time_limit" t-options="{'widget': 'duration', 'unit': 'minute'}"></span>
                </p>
              </div>
              <div class="buttons col-12">
                <button type="submit" value="start" class="btn btn-primary btn-lg pull-right mt-5">
                  <t t-if="survey.certification">
                              Start Certification
                  </t>
                  <t t-else="">
                              Start Survey
                  </t>
                </button>
              </div>
              <span class="o_survey_enter font-weight-bold text-muted ml-2">or press Enter</span>
            </t>
          </div>
        </div>
      </xpath>
    </template>

    <template id="o_survey_wrap_title" inherit_id="survey.survey_fill_header">
      <xpath expr="//h1[hasclass('o_survey_main_title')]" position="attributes">
        <attribute name="class">o_survey_main_title pt-4 float-right</attribute>
      </xpath>
      <xpath expr="//div[hasclass('col-10')]" position="attributes">
        <attribute name="class">col-5 offset-7</attribute>
      </xpath>
    </template>
    <template id="question_simple_choice_inherit" inherit_id="survey.question_simple_choice">
      <!-- <xpath expr='//div[@data-question-type="simple_choice_radio"]' position="attributes">
        <attribute name="t-att-data-type-q">'yesno' if question.type_simple_question == 'yesno' else 'rate' if question.type_simple_question == 'rate' else 'other'</attribute>
      </xpath> -->
      <xpath expr="//div[hasclass('o_survey_form_choice')]" position="replace">
        <div class="row o_survey_form_choice" t-att-data-name="question.id" data-question-type="simple_choice_radio" t-att-data-type-q="'yesno' if question.type_simple_question == 'yesno' else 'rate' if question.type_simple_question == 'rate' else 'other'">
          <t t-set="item_idx" t-value="0"/>
          <div t-attf-class="col-lg-12 d-flex flex-wrap">
            <t t-set="has_correct_answer" t-value="scoring_display_correction and any(label.is_correct for label in question.suggested_answer_ids)"/>
            <t t-foreach='question.suggested_answer_ids' t-as='label'>
              <t t-set="item_idx" t-value="label_index"/>
              <t t-set="answer_selected" t-value="answer_line and answer_line.suggested_answer_id.id == label.id"/>
              <t t-set="is_correct" t-value="label.answer_score > 0.0"/>

              <!--Used for print mode with corrections -->
              <t t-set="answer_class" t-if="not has_correct_answer" t-value="''" />
              <t t-set="answer_class" t-elif="is_correct" t-value="'bg-success'" />
              <t t-set="answer_class" t-elif="not is_correct" t-value="'bg-danger'" />

              <label t-att-for="str(question.id) + '_' + str(label.id)" t-att-class="'o_survey_choice_btn mr-2 mb-2 py-1 px-3 rounded %s %s' % (answer_class, 'o_survey_selected' if answer_selected else '')">
                <t t-call="survey.survey_selection_key">
                  <t t-set="selection_key_class" t-value="'position-relative o_survey_radio_btn float-left d-flex'"/>
                </t>
                <span class="ml-2" t-field='label.value'/>
                <input t-att-id="str(question.id) + '_' + str(label.id)" type="radio" t-att-value='label.id' class="o_survey_form_choice_item invisible position-absolute" t-att-name='question.id' t-att-checked="answer_line and answer_line.suggested_answer_id.id == label.id and 'checked' or None" t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"/>
                <i class="fa fa-check-circle float-right mt-1 position-relative"></i>
                <i class="fa fa-circle-thin float-right mt-1 position-relative"></i>
                <t t-call="survey.question_suggested_value_image"/>
              </label>
            </t>
            <div t-if='question.comments_allowed and question.comment_count_as_answer' class="js_comments">
              <div class="comment_extra_line">
                <label t-att-class="'o_survey_choice_btn mr-2 py-1 px-3 rounded %s' % ('o_survey_selected' if comment_line else '')">
                  <t t-set="item_idx" t-value="item_idx + 1"/>
                  <t t-call="survey.survey_selection_key">
                    <t t-set="selection_key_class" t-value="'position-relative o_survey_radio_btn float-left d-flex'"/>
                  </t>
                  <input type="radio" class="o_survey_form_choice_item o_survey_js_form_other_comment invisible position-absolute" value="-1" t-att-name='question.id' t-att-checked="comment_line and 'checked' or None" t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"/>
                  <span class="ml-2" t-field="question.comments_message" />
                  <i class="fa fa-check-circle float-right mt-1 position-relative"></i>
                  <i class="fa fa-circle-thin float-right mt-1 position-relative"></i>
                </label>
                <div t-attf-class="o_survey_comment_container py-0 px-1  #{'d-none' if not comment_line else ''}">
                  <textarea type="text" rows="1" cols="300" class="form-control  o_survey_question_text_box bg-transparent text-dark rounded-0 p-0" t-att-disabled="None if comment_line else 'disabled'">
                    <t t-esc="comment_line.value_char_box if comment_line else ''"/>
                  </textarea>
                </div>
              </div>
            </div>
            <div t-if='question.comments_allowed and not question.comment_count_as_answer' class="col-lg-12 o_survey_comment_container mx-1 mt-3 pl-3 pr-4">
              <textarea type="text" class="form-control o_survey_comment o_survey_question_text_box bg-transparent text-dark rounded-0 p-0" t-att-placeholder="question.comments_message if not survey_form_readonly else ''">
                <t t-esc="comment_line.value_char_box if comment_line else ''"/>
              </textarea>
            </div>
          </div>

        </div>
      </xpath>

    </template>
    <template id="question_multiple_choice_inherit" inherit_id="survey.question_multiple_choice">
      <xpath expr='//div[hasclass("o_survey_question_multiple_choice")]' position="replace">
        <div class="row o_survey_form_choice o_survey_question_multiple_choice multiple_choice_vertical" t-att-data-name="question.id" t-att-data-question-type="question.question_type">
          <t t-set="item_idx" t-value="0"/>
          <div class="d-flex flex-wrap col-6 offset-4">
            <t t-set="has_correct_answer" t-value="scoring_display_correction and any(label.is_correct for label in question.suggested_answer_ids)"/>
            <t t-foreach='question.suggested_answer_ids' t-as='label'>
              <t t-set="item_idx" t-value="label_index"/>
              <t t-set="answer_line" t-value="answer_lines.filtered(lambda line: line.suggested_answer_id == label)"/>
              <t t-set="answer_selected" t-value="answer_line and answer_line.suggested_answer_id.id == label.id"/>
              <t t-set="is_correct" t-value="label.answer_score > 0.0"/>

              <!--Used for print mode with corrections -->
              <t t-set="answer_class" t-if="not has_correct_answer" t-value="''" />
              <t t-set="answer_class" t-elif="is_correct" t-value="'bg-success'" />
              <t t-set="answer_class" t-elif="not is_correct" t-value="'bg-danger'" />

              <label t-att-class="'o_survey_choice_btn mr-2 py-1 px-3 rounded %s %s' % (answer_class, 'o_survey_selected' if answer_line else '')">
                <t t-call="survey.survey_selection_key">
                  <t t-set="selection_key_class" t-value="'position-relative float-left d-flex'"/>
                </t>
                <input type="checkbox" t-att-value='label.id' class="o_survey_form_choice_item invisible position-absolute" t-att-name="question.id" t-att-checked="'checked' if answer_line else None" t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"/>
                <span class="ml-2" t-field='label.value'/>
                <i class="fa fa-check-square float-right mt-1 position-relative"></i>
                <i class="fa fa-square-o float-right mt-1 position-relative"></i>
                <t t-call="survey.question_suggested_value_image"/>
              </label>
            </t>
            <div t-if='question.comments_allowed and question.comment_count_as_answer' class="js_ck_comments">
              <div class="comment_extra_line">
                <label t-att-class="'o_survey_choice_btn mr-2 py-1 px-3 rounded %s' % ('o_survey_selected' if comment_line else '')">
                  <t t-set="item_idx" t-value="item_idx + 1"/>
                  <t t-call="survey.survey_selection_key">
                    <t t-set="selection_key_class" t-value="'position-relative float-left d-flex'"/>
                  </t>
                  <input type="checkbox" class="o_survey_form_choice_item o_survey_js_form_other_comment invisible position-absolute" value="-1" t-att-name="question.id" t-att-checked="comment_line and 'checked' or None" t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"/>
                  <span class="ml-2" t-field="question.comments_message" />
                  <i class="fa fa-check-square float-right mt-1 position-relative"></i>
                  <i class="fa fa-square-o float-right mt-1 position-relative"></i>
                </label>
                <div t-attf-class="o_survey_comment_container py-0 px-1 #{'d-none' if not comment_line else ''}">
                  <textarea type="text" rows="1" cols="300" class="form-control o_survey_question_text_box bg-transparent text-dark rounded-0 p-0" t-att-disabled="None if comment_line else 'disabled'">
                    <t t-esc="comment_line.value_char_box if comment_line else ''"/>
                  </textarea>
                </div>
              </div>
            </div>
            <div t-if='question.comments_allowed and not question.comment_count_as_answer' class="col-lg-12 o_survey_comment_container mx-1 mt-3 py-0 pl-3 pr-4">
              <textarea type="text" class="form-control o_survey_comment o_survey_question_text_box bg-transparent text-dark rounded-0 p-0" t-att-placeholder="question.comments_message if not survey_form_readonly else ''">
                <t t-esc="comment_line.value_char_box if comment_line else ''"/>
              </textarea>
            </div>
          </div>

        </div>
      </xpath>

    </template>
    <template id="survey_fill_form_in_progress_inherit" inherit_id="survey.survey_fill_form_in_progress">
      <xpath expr="//div[hasclass('mb256')]" position="attributes">
        <attribute name="class" add="btns-survey" separator=" "/>
      </xpath>
      <xpath expr="//div[hasclass('row')][1]" position="attributes">
        <attribute name="class" add="btns-survey" separator=" "/>
      </xpath>
    </template>


    <template id="survey_assets_inherit" inherit_id="survey.survey_assets">
      <xpath expr="." position="inside">
        <script type="text/javascript" src="/survey_theme/static/src/js/survey.js"/>
        <script type="text/javascript" src="/survey_theme/static/src/js/survey_form.js"/>
        <link rel="stylesheet" type="text/scss" href="/survey_theme/static/src/scss/style.scss"/>
      </xpath>
    </template>
  </data>
</odoo>
